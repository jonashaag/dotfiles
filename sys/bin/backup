#!/bin/sh

safe_exec() {
    $@
    rv=$?
    if [ 0 -ne $rv ]
    then
        exit $rv
    fi
}

safe_exec ~/sys/bin/mount-exthdd "$1"
safe_exec rsync -arv --exclude-from=$HOME/.rsync-exclude ~ /media/exthdd/
safe_exec ~/sys/bin/mount-exthdd "$1"
