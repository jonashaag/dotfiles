# Contributors: Jonas Haag <jonas@lophus.org>
#               (formerly Pardi Tommaso <homer.j.simson.bis@gmail.com>)

pkgname=evilvte
pkgver=0.4.9~pre4
pkgrel=1
pkgdesc='VTE based, highly customizable terminal emulator (configured to auto-hide tab bar)'
arch=('i686' 'x86_64')
url='http://www.calno.com/evilvte/'
license=('GPL2')
depends=('vte')
makedepends=('pkg-config')
source=("http://www.calno.com/evilvte/${pkgname}-${pkgver}.tar.gz")
md5sums=('0f286ec7eea4d056d225007e803a7881')

# compatibility
replaces=('evilvte-hidetab')

build(){
    cd $srcdir/${pkgname}-${pkgver}

    ./configure --prefix=/usr || return 1
    # Hide the tab bar if only one tab is opened:
    sed -i "s/\/\/ \(#define TABBAR_AUTOHIDE\)/\1   /" src/config.h

    make || return 1
    make DESTDIR=$startdir/pkg install || return 1
    make clean

    # no LICENSE since 4.5~pre6?!
    # install -D -m644 LICENSE $startdir/pkg/usr/share/licenses/${pkgname}/LICENSE
}
