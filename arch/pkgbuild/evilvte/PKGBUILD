# Contributors: Jonas Haag <jonas@lophus.org>
#               (formerly Pardi Tommaso <homer.j.simson.bis@gmail.com>)

pkgname=evilvte
_pkgname=evilvte # previous pkgname
pkgver=0.4.7~pre3
pkgrel=1
pkgdesc='VTE based, highly customizable terminal emulator (configured to auto-hide tab bar)'
arch=('i686' 'x86_64')
url='http://www.calno.com/evilvte/'
license=('GPL2')
depends=('vte')
source=("http://www.calno.com/evilvte/${_pkgname}-${pkgver}.tar.gz")
md5sums=('7a93aa107f20c0db017e00d71762bff2')

# compatibility
replaces=('evilvte-hidetab')

build(){
    cd $srcdir/${_pkgname}-${pkgver}

    ./configure --prefix=/usr || return 1
    # Hide the tab bar if only one tab is opened:
    sed -i "s/\/\/ \(#define TABBAR_AUTOHIDE\)/\1   /" src/config.h

    make || return 1
    make DESTDIR=$startdir/pkg install || return 1
    make clean

    # no LICENSE since 4.5~pre6?!
    # install -D -m644 LICENSE $startdir/pkg/usr/share/licenses/${_pkgname}/LICENSE
}
